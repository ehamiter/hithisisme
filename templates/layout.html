<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Hi, this is me. An automated curation of my thoughts, projects, and more.">
  <meta name="author" content="Eric Hamiter">
  <meta name="keywords" content="Eric Hamiter, developer, apps, running, scuba diving, programming, projects">
  <meta name="robots" content="index, follow">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://hithisisme.com/">
  <meta property="og:title" content="hi this is me">
  <meta property="og:description" content="Hi, this is me. An automated curation of my thoughts, projects, and more.">
  <meta property="og:site_name" content="hi this is me">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary">
  <meta property="twitter:url" content="https://hithisisme.com/">
  <meta property="twitter:title" content="hi this is me">
  <meta property="twitter:description" content="Hi, this is me. An automated curation of my thoughts, projects, and more.">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://hithisisme.com/">
  
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üèÉ‚Äç‚ôÇÔ∏è</text></svg>">
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bulma@1.0.4/css/bulma.min.css"
  >
  <link rel="stylesheet" href="/style.css">
  <title>hi this is me</title>
</head>
<body>
<!--CONTENT-->

<footer class="footer">
  <div class="content has-text-centered">
    <p>Last updated <!--LAST_UPDATED--> | <a href="https://github.com/ehamiter/hithisisme/blob/main/index.hi" target="_blank" rel="noopener noreferrer">Source</a></p>
  </div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Main tab functionality
  const tabs = document.querySelectorAll('.tabs li[data-tab]');
  const tabContents = document.querySelectorAll('.tab-content');
  
  function activateTab(targetId, subcategory) {
    // Remove active class from all tabs
    tabs.forEach(t => t.classList.remove('is-active'));
    // Add active class to target tab
    const targetTab = document.querySelector(`.tabs li[data-tab="${targetId}"]`);
    if (targetTab) {
      targetTab.classList.add('is-active');
    }
    
    // Hide all tab content
    tabContents.forEach(content => content.classList.remove('is-active'));
    // Show target tab content
    const targetContent = document.getElementById(targetId + '-content');
    if (targetContent) {
      targetContent.classList.add('is-active');
    }
    
    // Handle subcategory filtering
    if (targetId === 'things' && subcategory) {
      filterThings(subcategory);
    }
  }
  
  tabs.forEach(tab => {
    tab.addEventListener('click', function(e) {
      e.preventDefault();
      const targetId = this.getAttribute('data-tab');
      
      // Update URL
      history.pushState({section: targetId}, '', `/${targetId}`);
      
      activateTab(targetId);
    });
  });
  
  // Handle browser back/forward
  window.addEventListener('popstate', function(e) {
    if (e.state && e.state.section) {
      activateTab(e.state.section, e.state.subcategory);
    }
  });
  
  // Parse initial URL and activate appropriate section
  const path = window.location.pathname;
  const hash = window.location.hash.substring(1);
  const pathParts = path.split('/').filter(p => p);
  
  if (pathParts.length > 0) {
    const section = pathParts[0];
    const subcategory = pathParts[1];
    
    const validSections = ['things', 'apps', 'repos'];
    if (validSections.includes(section)) {
      history.replaceState({section: section, subcategory: subcategory}, '', path + (hash ? '#' + hash : ''));
      activateTab(section, subcategory);
      if (hash) {
        highlightCard(hash);
      }
    } else {
      // Invalid section, show first tab
      if (tabs.length > 0) {
        const firstTab = tabs[0].getAttribute('data-tab');
        history.replaceState({section: firstTab}, '', `/${firstTab}`);
        activateTab(firstTab);
      }
    }
  } else {
    // No path, show first tab
    if (tabs.length > 0) {
      const firstTab = tabs[0].getAttribute('data-tab');
      history.replaceState({section: firstTab}, '', `/${firstTab}`);
      activateTab(firstTab);
    }
  }
  
  // Initialize category filter scroll
  initCategoryFilterScroll();
});

// Handle category filter scroll fade effects
function initCategoryFilterScroll() {
  const scrollContainer = document.querySelector('.category-filter-scroll');
  if (!scrollContainer) return;
  
  function updateScrollState() {
    const isAtStart = scrollContainer.scrollLeft <= 5;
    const isAtEnd = scrollContainer.scrollLeft >= scrollContainer.scrollWidth - scrollContainer.clientWidth - 5;
    
    scrollContainer.classList.toggle('at-start', isAtStart);
    scrollContainer.classList.toggle('at-end', isAtEnd);
  }
  
  // Update on scroll
  scrollContainer.addEventListener('scroll', updateScrollState);
  
  // Update on resize
  window.addEventListener('resize', updateScrollState);
  
  // Initial update
  updateScrollState();
}

// Category filtering function for things
function filterThings(category) {
  const buttons = document.querySelectorAll('.category-filter-buttons .button');
  const items = document.querySelectorAll('.thing-item');
  
  // Update button states
  buttons.forEach(btn => {
    btn.classList.remove('is-info', 'is-selected');
    if ((category === 'all' && btn.textContent === 'All') || 
        (category !== 'all' && btn.textContent.toLowerCase() === category)) {
      btn.classList.add('is-info', 'is-selected');
    }
  });
  
  // Show/hide items
  items.forEach(item => {
    if (category === 'all' || item.getAttribute('data-category') === category) {
      item.style.display = 'block';
    } else {
      item.style.display = 'none';
    }
  });
  
  // Preserve hash if it exists
  const hash = window.location.hash;
  
  // Update URL with subcategory
  if (category !== 'all') {
    history.pushState({section: 'things', subcategory: category}, '', `/things/${category}${hash}`);
  } else {
    history.pushState({section: 'things'}, '', `/things${hash}`);
  }
}

// Slugify function (matches Go implementation)
function slugify(str) {
  return str.toLowerCase()
    .replace(/ /g, '_')
    .replace(/["'&()\[\]{}\/\\?#%!@$^*+=<>|~`:;,.]/g, '');
}

// Highlight card function
function highlightCard(slug) {
  setTimeout(() => {
    const card = document.getElementById(slug);
    if (card) {
      card.classList.add('highlighted');
      card.scrollIntoView({ behavior: 'smooth', block: 'center' });
      
      setTimeout(() => {
        card.classList.remove('highlighted');
      }, 2000);
    }
  }, 300);
}

// Copy card link to clipboard
function copyCardLink(event, category, slug) {
  const url = `https://hithisisme.com/things/${category}/${slug}.html`;
  
  navigator.clipboard.writeText(url).then(() => {
    const btn = event.target.closest('.clipboard-btn');
    if (btn) {
      const svg = btn.querySelector('svg');
      const originalHTML = svg.innerHTML;
      
      // Change to checkmark icon
      svg.innerHTML = '<path d="M20 6L9 17l-5-5"></path>';
      btn.classList.add('copied');
      
      setTimeout(() => {
        svg.innerHTML = originalHTML;
        btn.classList.remove('copied');
      }, 1500);
    }
  }).catch(err => {
    console.error('Failed to copy link:', err);
  });
}
</script>

</body>
</html>
